(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{464:function(t,e,n){},526:function(t,e,n){"use strict";n(464)},544:function(t,e,n){"use strict";n.r(e);n(21),n(5),n(22),n(33),n(23),n(70),n(158),n(114),n(152),n(238),n(18),n(66),n(64),n(87);function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3e3,s=document.querySelectorAll(".global-tip"),r=(new Date).getTime(),a=0==s.length?0:s[s.length-1].getAttribute("data-top"),p=parseInt(a)+(0!=s.length?s[s.length-1].offsetHeight+17:n),c=document.createElement("div");c.className="global-tip tip-".concat(e," ").concat(r),c.style.top=parseInt(a)+"px",c.setAttribute("data-top",p),"info"==e||1==e?c.innerHTML='<i class="iconfont icon-info icon"></i><p class="tip-info-content">'.concat(t,"</p>"):"success"==e||2==e?c.innerHTML='<i class="iconfont icon-dagouyouquan icon"></i><p class="tip-success-content">'.concat(t,"</p>"):"danger"==e||3==e?c.innerHTML='<i class="iconfont icon-cuowu icon"></i><p class="tip-danger-content">'.concat(t,"</p>"):"warning"!=e&&4!=e||(c.innerHTML='<i class="iconfont icon-gantanhao icon"></i><p class="tip-warning-content">'.concat(t,"</p>")),document.body.appendChild(c);var u=document.getElementsByClassName(r)[0];setTimeout((function(){u.style.top=parseInt(p)+"px",u.style.opacity="1"}),10),setTimeout((function(){u.style.top="0px",u.style.opacity="0";for(var t=i(u),e=0;e<t.length;e++){var n=t[e],o=parseInt(n.getAttribute("data-top"))-n.offsetHeight-17;n.setAttribute("data-top",o),n.style.top=o+"px"}setTimeout((function(){u.remove()}),500)}),o)}function i(t){for(var e=[],n=t;n;n=n.nextSibling)1===n.nodeType&&n!==t&&e.push(n);return e}var s={data:function(){return{username:"",password:"",privateInfo:{username:"",password:"",loginKey:"",expire:"",loginInfo:"",allLoginKey:"kbt"}}},mounted:function(){var t=this;document.onkeyup=function(e){13==window.event.keyCode&&t.login()}},methods:{login:function(){var t=this,e=this.privateInfo,n=this.$themeConfig.privatePage,i=n.username,s=n.password,r=n.loginKey,a=n.expire,p=n.firstLoginKey,c=n.loginInfo;if(!r&&(r="vdoing_manager"),!(a=this.getExpire(a))&&(a=864e5),this.username&&this.password)if("first"==this.$route.query.verifyMode){e.expire=a,!p&&(p="vdoing_first_login");var u=!1;c&&c.hasOwnProperty(p)&&(u=this.checkLoginInfoAndJump(c[p],p)),u||this.username!=i||this.password!=s?u||(this.password="",o("用户名或者密码错误！请联系博主获取用户名和密码！","danger")):this.storageLocalAndJump(r,!0)}else{if("single"==this.$route.query.verifyMode)try{this.$filterPosts.forEach((function(n){if(n.path==t.$route.query.toPath)throw e.username=n.frontmatter.username,e.password=n.frontmatter.password,e.loginKey=n.frontmatter.permalink,e.expire=t.getExpire(n.frontmatter.expire)||a,e.loginInfo=n.frontmatter.loginInfo,new Error}))}catch(t){}var l=!1;e.username||e.password||e.loginInfo||(e.loginKey=this.$route.query.toPath,e.loginInfo=c,!e.expire&&(e.expire=a)),e.loginInfo&&(Array.isArray(e.loginInfo)?l=this.checkLoginInfoAndJump(e.loginInfo):e.loginInfo.hasOwnProperty(this.$route.query.toPath)&&(l=this.checkLoginInfoAndJump(e.loginInfo[this.$route.query.toPath]))),l||(this.username==e.username&&this.password==e.password?this.storageLocalAndJump(this.privateInfo.loginKey,!0):this.username==i&&this.password==s?this.storageLocalAndJump(r,!0):(this.password="",o("用户名或者密码错误！请联系博主获取用户名和密码！","danger")))}else""==this.username&&""!=this.password?o("用户名不能为空！","warning"):""!=this.username&&""==this.password?o("密码不能为空！","warning"):o("您访问的文章是私密文章，请先输入用户名和密码！","info")},checkLoginInfoAndJump:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.privateInfo.loginInfo,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.privateInfo.loginKey;try{e.forEach((function(e){if(t.username==e.username&&t.password==e.password)throw t.storageLocalAndJump(n,!0),new Error}))}catch(t){return!0}return!1},storageLocalAndJump:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.privateInfo.loginKey,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=JSON.stringify({username:this.username,password:this.password,time:(new Date).getTime(),expire:this.privateInfo.expire});window.localStorage.setItem(t,n),e&&(o("登录成功，正在跳转 ...","success"),this.$route.query.toPath?this.$router.push({path:this.$route.query.toPath}):this.$router.push({path:"/"}))},getExpire:function(t){return t&&(t=-1!==t.indexOf("d")?24*parseInt(t.replace("d",""))*60*60*1e3:-1!==t.indexOf("h")?60*parseInt(t.replace("h",""))*60*1e3:1e3*parseInt(t)),t}}},r=(n(526),n(15)),a=Object(r.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login-form"},[n("div",{staticClass:"form-header"},[t._v("用户名")]),t._v(" "),n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",placeholder:"请输入用户名 ..."},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"form-header"},[t._v("密码")]),t._v(" "),n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"请输入密码 ..."},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"btn-row"},[n("button",{staticClass:"btn",on:{click:t.login}},[t._v("登录")])])])}),[],!1,null,null,null);e.default=a.exports}}]);